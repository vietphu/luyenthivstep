<!DOCTYPE html><html lang="vi" data-bs-theme="auto"><head>
	<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="/assets/image/favicon/favicon.ico" type="image/x-icon">
<title>Luyá»‡n Ä‘á» NÃ³i VSTEP | Luyá»‡n Ä‘á» VSTEP</title>
<link rel="stylesheet" href="/assets/theme/dashkit/assets/css/theme.bundle.css">
<link rel="stylesheet" href="/assets/datatables/dataTables.bootstrap5.min.css">
<link rel="stylesheet" href="/assets/css/user.css">

<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3SBM3LJGHF"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-3SBM3LJGHF');
</script>	<style type="text/css">
	#offcanvasTranslation {
		width: 100%;
		max-width: none;
	}
	@media (min-width: 992px) {
		#offcanvasTranslation {
			width: 70% !important;
			max-width: 700px;
		}
	}
	connection {
		border: 2px solid;
		color: #2c7be5;
	}
</style>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light ">
	<div class="container">
		<!-- NÃºt thu gá»n menu trÃªn mobile -->
		<button class="navbar-toggler me-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Má»Ÿ menu Ä‘iá»u hÆ°á»›ng">
			<span class="navbar-toggler-icon"></span>
		</button>

		<!-- Logo trang web -->
		<a class="navbar-brand me-auto order-lg-first" href="/">
			<img src="/assets/image/luyenthivstep-logo.webp" width="24" height="24" alt="Logo Luyá»‡n thi VSTEP" class="navbar-brand-img">
			<span class="ps-1 color-brand fw-bold">LUYá»†N THI VSTEP</span>
		</a>

		<div class="navbar-user order-lg-1">
											<div class="dropdown">
					<a href="#" class="avatar avatar-sm avatar-online dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<span class="avatar-title rounded-circle">
							PH						</span>
					</a>
					<div class="dropdown-menu dropdown-menu-end mt-2 shadow-sm border-0">
						<h6 class="dropdown-header">Xin chÃ o ğŸ‘‹</h6>
						<a href="/user/general" class="dropdown-item text-muted">TÃ i khoáº£n: VSTEP203118</a>

						<div class="dropdown-divider"></div>
						<a href="/user/history" class="dropdown-item">ğŸ“ Lá»‹ch sá»­ thi</a>
						<a href="/practice/history" class="dropdown-item">ğŸ“Š Lá»‹ch sá»­ luyá»‡n Ä‘á»</a>
						<a href="/user/writing" class="dropdown-item">âœï¸ BÃ i thi viáº¿t</a>
						<a href="/user/speaking" class="dropdown-item">ğŸ¤ BÃ i thi nÃ³i</a>

						<div class="dropdown-divider"></div>
						<h6 class="dropdown-header">Cháº¿ Ä‘á»™ hiá»ƒn thá»‹</h6>
						<div class="px-3 pb-2">
							<div class="btn-group w-100" role="group" aria-label="Chuyá»ƒn cháº¿ Ä‘á»™ hiá»ƒn thá»‹">
								<button class="btn btn-sm btn-outline-secondary" data-bs-theme-value="light" aria-label="Giao diá»‡n sÃ¡ng">
									<i class="fe fe-sun"></i>
								</button>
								<button class="btn btn-sm btn-outline-secondary" data-bs-theme-value="dark" aria-label="Giao diá»‡n tá»‘i">
									<i class="fe fe-moon"></i>
								</button>
								<button class="btn btn-sm btn-outline-secondary active" data-bs-theme-value="auto" aria-label="Tá»± Ä‘á»™ng">
									<i class="fe fe-monitor"></i>
								</button>
							</div>
						</div>

						<div class="dropdown-divider"></div>
						<a href="/user/logout" class="dropdown-item text-danger"><i class="fe fe-log-out me-2"></i> ÄÄƒng xuáº¥t</a>
					</div>
				</div>
					</div>


		<div class="collapse navbar-collapse me-lg-auto order-lg-0" id="navbar">

			<!-- Danh sÃ¡ch menu chÃ­nh -->
			<ul class="navbar-nav me-lg-auto">

				<!-- Dropdown Luyá»‡n Ä‘á» -->
				<li class="nav-item dropdown">
					<a class="nav-link fw-bold dropdown-toggle active" href="#" id="practiceSidebar" role="button" data-bs-toggle="dropdown">
						Luyá»‡n Ä‘á»
					</a>
					<ul class="dropdown-menu" aria-labelledby="practiceSidebar">
						<li><a href="/practice" class="dropdown-item">Danh sÃ¡ch Ä‘á»</a></li>
						<li><a href="/practice/listening" class="dropdown-item">Luyá»‡n Ä‘á» nghe</a></li>
						<li><a href="/practice/reading" class="dropdown-item">Luyá»‡n Ä‘á» Ä‘á»c</a></li>
						<li><a href="/practice/writing" class="dropdown-item">Luyá»‡n Ä‘á» viáº¿t</a></li>
						<li><a href="/practice/speaking" class="dropdown-item">Luyá»‡n Ä‘á» nÃ³i</a></li>
					</ul>
				</li>

				
									<li class="nav-item">
						<a class="nav-link fw-bold " href="/exam">
							Thi thá»­						</a>
					</li>
									<li class="nav-item">
						<a class="nav-link fw-bold " href="/goi-on-luyen-cham-thi-vstep">
							GÃ³i cÆ°á»›c						</a>
					</li>
									<li class="nav-item">
						<a class="nav-link fw-bold " href="/lich-thi-vstep">
							Lá»‹ch thi						</a>
					</li>
									<li class="nav-item">
						<a class="nav-link fw-bold " href="/bai-viet-vstep">
							BÃ i viáº¿t						</a>
					</li>
				
			</ul>
		</div>

	</div>
</nav>
	<div class="bg-white border-bottom shadow-sm sticky-top z-1 px-3 py-2">
	<div class="container-fluid">
		<div class="row align-items-center text-center text-md-start">
			<!-- TrÃ¡i: NÃºt quay láº¡i -->
			<div class="col-12 col-md-3 mb-2 mb-md-0">
				<button id="btn-back" class="btn btn-outline-secondary btn-sm">
					â¬…ï¸ Quay láº¡i danh sÃ¡ch Ä‘á»
				</button>
			</div>

			<!-- Giá»¯a: ThÃ´ng tin Ä‘á» -->
			<div class="col-12 col-md-6 text-center">
				<span class="fw-bold text-muted small d-block">
					ğŸ—£ï¸ Báº¡n Ä‘ang luyá»‡n Ä‘á» nÃ³i mÃ£ sá»‘ 03 - Part 3				</span>
				<span class="fw-bold text-muted small d-block">
					ğŸ†” MÃ£ bÃ i lÃ m: #S56601				</span>
			</div>

			<!-- Pháº£i: Lá»i chÃ o + nÃºt dá»‹ch -->
			<div class="col-12 col-md-3 text-md-end">
				<span class="small text-muted fw-bold d-block">
					ğŸ‘‹ Xin chÃ o, phuneo				</span>
				<button id="toggleTranslationBtn" class="btn btn-outline-primary btn-sm mt-2" data-bs-toggle="offcanvas" data-bs-target="#offcanvasTranslation">
					ğŸŒ Dá»‹ch tiáº¿ng Viá»‡t
				</button>
			</div>
		</div>
	</div>
</div>
	
	<div class="main-content pb-5 pb-md-7">

		
		<div class="container">
			
<!-- Offcanvas Translation -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasTranslation">
	<div class="offcanvas-header">
		<span class="offcanvas-title fw-bold">Dá»‹ch tiáº¿ng Viá»‡t</span>
		<button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
	</div>
	<div class="offcanvas-body">
		<p><strong>Chá»§ Ä‘á»: LÃ m viá»‡c theo cáº·p giÃºp há»c sinh há»c tá»‘t hÆ¡n á»Ÿ trÆ°á»ng.</strong><br>
			</p><div class="container">
				<div class="row align-items-center">
					<div class="col"></div>
					<div class="col">
						<div class="khoa-con bg-primary rounded text-white p-3 m-4 text-center">Gives students the opportunity to learn from others</div>
					</div>
					<div class="col"></div>
				</div>
				<div class="row align-items-center">
					<div class="col">
						<div class="khoa-con bg-primary rounded text-white p-3 m-4 text-center">Helps students become more active</div>
					</div>
					<div class="col">
						<div class="khoa-cha bg-primary rounded text-white fw-bold p-3 m-4 text-center">Pair work</div>
					</div>
					<div class="col">
						<div class="khoa-con bg-primary rounded text-white p-3 m-4 text-center">Your own ideas</div>
					</div>
				</div>
				<div class="row align-items-center">
					<div class="col"></div>
					<div class="col">
						<div class="khoa-con bg-primary rounded text-white p-3 m-4 text-center">Improves students' social skills and interaction</div>
					</div>
					<div class="col"></div>
				</div>
			</div>
		<br><strong>CÃ¢u há»i gá»£i Ã½:</strong><br>1. Nhá»¯ng tÃ¬nh huá»‘ng nÃ o á»Ÿ trÆ°á»ng nÃªn Ã¡p dá»¥ng lÃ m viá»‡c theo cáº·p? Táº¡i sao?<br>2. Má»™t sá»‘ báº¥t lá»£i khi lÃ m viá»‡c theo cáº·p lÃ  gÃ¬?<br>3. GiÃ¡o viÃªn cÃ³ thá»ƒ lÃ m gÃ¬ Ä‘á»ƒ nÃ¢ng cao hiá»‡u quáº£ cá»§a cÃ¡c hoáº¡t Ä‘á»™ng lÃ m viá»‡c theo cáº·p?<p></p>
	</div>
</div>

<div class="row mt-4">
	<div class="col-12">
		<div class="card">
			<div class="card-body">

				<!-- CÃ¢u há»i -->
				<div class="bg-light rounded p-3 border mb-3">
					<b>Topic: Working in pairs helps students learn better at school.</b><br>
			<div class="container">
				<div class="row align-items-center">
					<div class="col"></div>
					<div class="col">
						<div class="map-child bg-primary rounded text-white p-3 m-4 text-center">Gives students the opportunity to learn from others</div>
					</div>
					<div class="col"></div>
				</div>
				<div class="row align-items-center">
					<div class="col">
						<div class="map-child bg-primary rounded text-white p-3 m-4 text-center">Helps students become more active</div>
					</div>
					<div class="col">
						<div class="map-parent bg-primary rounded text-white fw-bold p-3 m-4 text-center">Pair work</div>
					</div>
					<div class="col">
						<div class="map-child bg-primary rounded text-white p-3 m-4 text-center">Your own ideas</div>
					</div>
				</div>
				<div class="row align-items-center">
					<div class="col"></div>
					<div class="col">
						<div class="map-child bg-primary rounded text-white p-3 m-4 text-center">Improves students' social skills and interaction</div>
					</div>
					<div class="col"></div>
				</div>
			</div>
		<br><b>Follow-up questions:</b><br>1. In what situations should pair work be used at school, and why?<br>2. What are some possible disadvantages of working in pairs?<br>3. How can teachers improve the effectiveness of pair work activities?<br>				</div>

				<!-- Khu vá»±c ghi Ã¢m -->
				<div class="d-flex justify-content-between align-items-center fw-bold my-4">
					<span>ğŸ¤ Ghi Ã¢m cÃ¢u tráº£ lá»i:</span>
					<span class="text-primary">â± Thá»i gian ghi Ã¢m tá»‘i Ä‘a cho Part 3 lÃ  4 phÃºt.</span>
				</div>

				<div class="progress my-2 position-relative" style="height: 38px;">
					<div id="recordProgress" class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
					</div>
					<div id="countdownDisplay" class="position-absolute top-50 start-50 translate-middle fw-bold fs-3 text-primary">
						â± --:--
					</div>
				</div>

				<canvas id="waveform" width="600" height="80" class="w-100 border rounded bg-light mb-3"></canvas>

				<div class="text-center d-flex justify-content-center flex-wrap gap-2">
					<button id="startBtn" class="btn btn-success">âº Báº¯t Ä‘áº§u ghi Ã¢m</button>
					<button id="stopBtn" class="btn btn-danger" disabled="">â¹ Dá»«ng ghi Ã¢m</button>
				</div>

				<div class="text-center mt-3">
					<audio id="audioPlayback" controls=""></audio>
				</div>

				<div class="mt-2 text-center">
					<button id="uploadBtn" class="btn btn-primary fw-bold px-4">ğŸ“¤ Ná»™p bÃ i</button>
				</div>

			</div>
		</div>
	</div>
</div>

		</div>

	</div>

	<script type="text/javascript" src="/assets/js/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="/assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/theme/dashkit/assets/js/theme.bundle.js"></script>
<script>
	function applyTheme(theme) {
		document.documentElement.setAttribute('data-bs-theme', theme);
		localStorage.setItem('theme', theme);

		// Cáº­p nháº­t class active
		document.querySelectorAll('[data-bs-theme-value]').forEach(button => {
			if (button.getAttribute('data-bs-theme-value') === theme) {
				button.classList.add('active');
			} else {
				button.classList.remove('active');
			}
		});
	}

	// GÃ¡n sá»± kiá»‡n click cho cÃ¡c nÃºt
	document.querySelectorAll('[data-bs-theme-value]').forEach(button => {
		button.addEventListener('click', function () {
			const theme = this.getAttribute('data-bs-theme-value');
			applyTheme(theme);
		});
	});

	// Khá»Ÿi Ä‘á»™ng: Ã¡p dá»¥ng theme Ä‘Ã£ lÆ°u hoáº·c auto
	const savedTheme = localStorage.getItem('theme') || 'auto';
	applyTheme(savedTheme);
</script>

	<script type="text/javascript" src="/assets/jquery-connections/jquery.connections.js"></script>
<script>

$(document).ready(function() {
	$(".map-parent").connections({to: ".map-child"});
});

$(".vh-exam").scroll(function() {
	$(".map-parent").connections("update");
});

let mediaRecorder;
let audioChunks = [];
let audioBlob;
let timeoutId;
let countdownInterval;

const startBtn = document.getElementById("startBtn");
const stopBtn = document.getElementById("stopBtn");
const uploadBtn = document.getElementById("uploadBtn");
const audioPlayback = document.getElementById("audioPlayback");
const countdownDisplay = document.getElementById("countdownDisplay");

// ğŸ•’ Thá»i lÆ°á»£ng tá»‘i Ä‘a theo part
const maxDurations = { 1: 180, 2: 180, 3: 240 };
const speakingPart = 3;
const maxDuration = maxDurations[speakingPart] ?? 180;

startBtn.addEventListener("click", async () => {
	const stream = await navigator.mediaDevices.getUserMedia({ audio: true });

	// ğŸµ Khá»Ÿi táº¡o AudioContext vÃ  váº½ sÃ³ng Ã¢m
	const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
	const source = audioCtx.createMediaStreamSource(stream);
	const analyser = audioCtx.createAnalyser();
	analyser.fftSize = 512;
	source.connect(analyser);

	const canvas = document.getElementById("waveform");
	const canvasCtx = canvas.getContext("2d");

	const bufferLength = analyser.fftSize;
	const dataArray = new Uint8Array(bufferLength);

	function drawWaveform() {
		requestAnimationFrame(drawWaveform);

		analyser.getByteTimeDomainData(dataArray);

		// Clear canvas
		canvasCtx.clearRect(0, 0, canvas.width, canvas.height);

		canvasCtx.lineWidth = 1.5;
		canvasCtx.strokeStyle = '#007bff'; // xanh dÆ°Æ¡ng dá»‹u

		canvasCtx.beginPath();

		const sliceWidth = canvas.width / bufferLength;
		let x = 0;

		for (let i = 0; i < bufferLength; i++) {
			const v = dataArray[i] / 128.0; // Chuáº©n hÃ³a vá» khoáº£ng [0, 2]
			const y = v * canvas.height / 2;

			if (i === 0) {
				canvasCtx.moveTo(x, y);
			} else {
				canvasCtx.lineTo(x, y);
			}
			x += sliceWidth;
		}

		canvasCtx.lineTo(canvas.width, canvas.height / 2);
		canvasCtx.stroke();
	}

	// Gá»i báº¯t Ä‘áº§u váº½ sÃ³ng
	drawWaveform();

	mediaRecorder = new MediaRecorder(stream);
	audioChunks = [];

	mediaRecorder.ondataavailable = event => {
		if (event.data.size > 0) {
			audioChunks.push(event.data);
		}
	};

	mediaRecorder.onstop = () => {
		audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
		audioPlayback.src = URL.createObjectURL(audioBlob);

		clearTimeout(timeoutId);
		clearInterval(countdownInterval);
		countdownDisplay.textContent = "â± ÄÃ£ káº¿t thÃºc";
		document.getElementById("recordProgress").style.width = "100%";
		document.getElementById("recordProgress").classList.remove("bg-danger");
		document.getElementById("recordProgress").classList.add("bg-success");

		canvasCtx.clearRect(0, 0, canvas.width, canvas.height);

	};

	mediaRecorder.start();
	startBtn.disabled = true;
	stopBtn.disabled = false;

	// â± Báº¯t Ä‘áº§u Ä‘áº¿m ngÆ°á»£c
	startCountdown(maxDuration);

	// â± Tá»± Ä‘á»™ng dá»«ng khi háº¿t thá»i gian
	timeoutId = setTimeout(() => {
		if (mediaRecorder && mediaRecorder.state === "recording") {
			mediaRecorder.stop();
			alert(`â° ÄÃ£ Ä‘áº¡t thá»i gian tá»‘i Ä‘a ${maxDuration / 60} phÃºt. Ghi Ã¢m sáº½ tá»± Ä‘á»™ng dá»«ng.`);
			startBtn.disabled = false;
			stopBtn.disabled = true;
		}
	}, maxDuration * 1000);
});

stopBtn.addEventListener("click", () => {
	if (mediaRecorder && mediaRecorder.state === "recording") {
		mediaRecorder.stop();
	}
	startBtn.disabled = false;
	stopBtn.disabled = true;
	clearTimeout(timeoutId);
	clearInterval(countdownInterval);
	countdownDisplay.textContent = "â± ÄÃ£ káº¿t thÃºc";
});

uploadBtn.addEventListener("click", (e) => {

	if (!audioBlob) {
		alert("âŒ Vui lÃ²ng ghi Ã¢m trÆ°á»›c khi ná»™p bÃ i.");
		return;
	}

	let formData = new FormData();
	formData.append('audio_file', audioBlob, 'speaking_56601.webm');
	formData.append('practice_id', 56601);

	fetch('/practice/speaking/submit/56601', {
		method: 'POST',
		body: formData
	})
	.then(response => response.json())
	.then(result => {
		if (result.success) {
			alert("âœ… BÃ i nÃ³i Ä‘Ã£ Ä‘Æ°á»£c ná»™p thÃ nh cÃ´ng.");
			window.location.href = "/practice/speaking/review/" + result.practice_id;
		} else {
			alert("âŒ " + result.message);
		}
	})
	.catch(error => {
		console.error('Lá»—i khi gá»­i bÃ i:', error);
		alert("âŒ Lá»—i khi gá»­i bÃ i. Vui lÃ²ng thá»­ láº¡i.");
	});
});

// ğŸ¯ HÃ m Ä‘áº¿m ngÆ°á»£c
function startCountdown(seconds) {
	let remaining = seconds;
	updateCountdownDisplay(remaining);
	updateProgressBar(remaining, seconds);

	countdownInterval = setInterval(() => {
		remaining--;
		if (remaining <= 0) {
			clearInterval(countdownInterval);
			return;
		}
		updateCountdownDisplay(remaining);
		updateProgressBar(remaining, seconds);
	}, 1000);
}

function updateProgressBar(current, total) {
	const percent = Math.round(100 * (1 - current / total));
	const bar = document.getElementById("recordProgress");
	bar.style.width = percent + '%';
	bar.setAttribute('aria-valuenow', percent);
}

function updateCountdownDisplay(seconds) {
	const mins = String(Math.floor(seconds / 60)).padStart(2, '0');
	const secs = String(seconds % 60).padStart(2, '0');
	countdownDisplay.textContent = `â± ${mins}:${secs}`;
}

document.getElementById('btn-back').addEventListener('click', function () {
	const confirmed = confirm("Báº¡n váº«n chÆ°a ná»™p bÃ i.\nBáº¡n cÃ³ cháº¯c cháº¯n muá»‘n quay láº¡i danh sÃ¡ch Ä‘á» khÃ´ng?");
	if (confirmed) {
		window.location.href = "/practice/speaking";
	}
});
</script>


</body><connection class="connection" style="border-radius: 0px; position: absolute; border-width: 0px 0px 0px 2px; left: 631.508px; top: 312.641px; width: 0px; height: 48px;"></connection><connection class="connection" style="border-radius: 0px; position: absolute; border-width: 2px 0px 0px; left: 423.172px; top: 382.891px; width: 72px; height: 0px;"></connection><connection class="connection" style="border-radius: 0px; position: absolute; border-width: 2px 0px 0px; left: 769.844px; top: 382.891px; width: 72px; height: 0px;"></connection><connection class="connection" style="border-radius: 0px; position: absolute; border-width: 0px 0px 0px 2px; left: 631.508px; top: 407.141px; width: 0px; height: 48px;"></connection></html>